(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var e=this||self;var f,h;a:{for(var l=["CLOSURE_FLAGS"],m=e,n=0;n<l.length;n++)if(m=m[l[n]],m==null){h=null;break a}h=m}var p=h&&h[610401301];f=p!=null?p:!1;var q;const r=e.navigator;q=r?r.userAgentData||null:null;function t(a){return f?q?q.brands.some(({brand:b})=>b&&b.indexOf(a)!=-1):!1:!1}function u(a){var b;a:{if(b=e.navigator)if(b=b.userAgent)break a;b=""}return b.indexOf(a)!=-1};function v(){return f?!!q&&q.brands.length>0:!1}function w(){return v()?t("Chromium"):(u("Chrome")||u("CriOS"))&&!(v()?0:u("Edge"))||u("Silk")};!u("Android")||w();w();u("Safari")&&(w()||(v()?0:u("Coast"))||(v()?0:u("Opera"))||(v()?0:u("Edge"))||(v()?t("Microsoft Edge"):u("Edg/"))||v()&&t("Opera"));var x=new Set,y=function(a,b,c=!1){a=typeof Symbol==="function"&&typeof Symbol()==="symbol"?Symbol.for&&a?Symbol.for(a):a!=null?Symbol(a):Symbol():b;c&&x.add(a);return a}("jas",void 0,!0);const z=typeof Symbol==="function"&&typeof Symbol()==="symbol"?y:"h",A=Object.getOwnPropertyDescriptor(Array.prototype,"g");
Object.defineProperties(Array.prototype,{g:{get(){function a(k,g){k&b&&c.push(g)}const b=this[z]|0,c=[];a(1,"IS_REPEATED_FIELD");a(2,"IS_IMMUTABLE_ARRAY");a(4,"IS_API_FORMATTED");a(4096,"STRING_FORMATTED");a(8192,"GBIGINT_FORMATTED");a(8192,"BINARY");a(8,"ONLY_MUTABLE_VALUES");a(32,"MUTABLE_REFERENCES_ARE_OWNED");a(64,"CONSTRUCTED");a(128,"TRANSFERRED");a(256,"HAS_SPARSE_OBJECT");a(512,"HAS_MESSAGE_ID");a(2048,"FROZEN_ARRAY");a(16384,"DESERIALIZED_FROM_BINARY");var d=b>>15&1023||536870912;d!==536870912&&
c.push(`pivot: ${d}`);d=c.join(",");return A?A.get.call(this)+"|"+d:d},configurable:!0,enumerable:!1}});typeof Proxy!=="undefined"&&new Proxy({},{getPrototypeOf:B,setPrototypeOf:B,isExtensible:B,preventExtensions:B,getOwnPropertyDescriptor:B,defineProperty:B,has:B,get:B,set:B,deleteProperty:B,apply:B,construct:B});function B(){throw Error("this array or object is owned by JSPB and should not be reused, did you mean to copy it with copyJspbArray? See go/jspb-api-gotchas#construct_from_array");};function C(){};(function(){const a=e.jspbGetTypeName;e.jspbGetTypeName=a?b=>a(b)||void 0:C})();function D(){var a=window.location.hash;return new URLSearchParams(a[0]==="#"?a.substr(1):"")};function F(a){a=Number(a);return!a||a<0?"":a.toFixed(2)}function G(a){a=String(a);const b=a.split(",").map(Number);return b.length===1&&b[0]>0||b.length===3&&b[0]>0&&!isNaN(b[1])&&!isNaN(b[2])?a:""}function H(a){return a!=="0"&&a!=="1"?"":a}
function I(a,b){if(a){var c=(history.state||{}).fractionalStartPage,d=null,k=null,g=null,E=null;c?b&&(d=(history.state||{}).navpanes,g=(history.state||{}).zoom):(b=D(),c=F(b.get("page"))||"1",d=H(b.get("navpanes")),k=b.get("view"),g=G(b.get("zoom")),E=b.get("nameddest"));a.postMessage({type:"restoreReadingProgress",fractionalStartPage:c,navpanes:d,view:k,zoom:g,nameddest:E},"*")}}function J(){return(new URLSearchParams(window.location.hash.substring(1))).get("gsr")==="0"}
function K(){let a;window.addEventListener("popstate",()=>{J()||a&&I(a,!1)});window.addEventListener("message",b=>{if(b.origin==="chrome-extension://"+chrome.runtime.id&&b.data&&typeof b.data==="object"&&!J())if(a=b.source,b.data.type==="ready")I(a,!0);else if(b.data.type==="pushState"){var c=F(b.data.fractionalStartPage),d=G(b.data.zoom);const k=H(b.data.navpanes);if(c||d||k){b=Number(c);const g=D();g.set("page",b.toFixed(2));history.pushState({fractionalStartPage:c,navpanes:k,zoom:d},"","#"+g.toString())}else console.log("fractionalStartPage, zoomPct, or navpanes required")}else b.data.type===
"replaceState"&&(c=F(b.data.fractionalStartPage),d=G(b.data.zoom),b=H(b.data.navpanes),c||d||b?history.replaceState({fractionalStartPage:c,navpanes:b,zoom:d},""):console.log("fractionalStartPage, zoomPct, or navpanes required"))})};function L(){var a=history.state;if(a===null)return!0;if(typeof a!=="object")return!1;a=Object.keys(a);const b=["fractionalStartPage","navpanes","zoom"],c=a.filter(d=>b.includes(d));return a.length===c.length}window.gsrHistoryTopWindow===void 0&&(window.gsrHistoryTopWindow=L())&&K(); return window.gsrHistoryTopWindow;})();
